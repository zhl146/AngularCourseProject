<form [formGroup]="recipeForm"
      novalidate
      class="recipe-detail-container"
      (ngSubmit)='onSubmit()' fxLayoutWrap>

  <md-card fxLayoutWrap
           fxLayout="row"
           fxFlex="100"
           fxLayoutAlign="center center">
    <md-input-container fxFlex="100">
      <input type="text"
             placeholder="Recipe Name"
             fxFlex="100"
             mdInput
             formControlName="recName">
    </md-input-container>

    <md-input-container fxFlex="100">
        <textarea rows="1"
                  fxFlex="100"
                  placeholder="Recipe Image Path"
                  mdTextareaAutosize
                  mdAutosizeMinRows="1"
                  mdInput
                  #imgPath
                  [id]="imgPath"
                  name="textarea"
                  formControlName="recImgPath">
      </textarea>
    </md-input-container>

    <img md-card-image
         [src]="imgPath.value">

    <md-input-container fxFlex="100">
    <textarea rows="1"
              fxFlex="100"
              placeholder="Recipe Description"
              mdTextareaAutosize
              mdAutosizeMinRows="1"
              mdInput
              name="textarea"
              formControlName="recDescription">

      </textarea>
    </md-input-container>

  </md-card>

  <md-card fxFlex="100" fxLayout="row" fxLayoutWrap>

    <div fxFlex="100">
      Preparation time
    </div>
    <md-input-container fxFlex="50">
      <input fxFlex="100"
             mdInput
             placeholder="Hours"
             class="form-control"
             type="text"
             formControlName="recPrepHours">
    </md-input-container>
    <md-input-container fxFlex="50">
      <input fxFlex="100"
             mdInput
             placeholder="Minutes"
             class="form-control"
             type="text"
             formControlName="recPrepMinutes">
    </md-input-container>
    <div fxFlex="100">
      Cook time
    </div>
    <md-input-container fxFlex="50">
      <input fxFlex="100"
             mdInput
             placeholder="Hours"
             class="form-control"
             type="text"
             formControlName="recCookHours">
    </md-input-container>
    <md-input-container fxFlex="50">
      <input fxFlex="100"
             mdInput
             placeholder="Minutes"
             class="form-control"
             type="text"
             formControlName="recCookMinutes">
    </md-input-container>
  </md-card>


  <md-card formArrayName="recIng"
           fxFlex="100"
           fxLayout="row"
           fxLayoutAlign="center"
           fxLayoutWrap>
    <md-card-header fxFlex="100">
      Ingredients
    </md-card-header>

    <div fxFlex="100"
         *ngFor="let ingCtrl of getFormArrayControls('recIng'); let i=index"
         [formGroupName]="i"
         [ngClass]="{last: isLastElement(i, 'recIng')}"
         fxLayoutAlign="center center">

      <md-icon (click)="addItemFuncFactory('recIng')()"
               *ngIf="isLastElement(i, 'recIng')"
               md-list-icon>
          add
        </md-icon>

        <md-input-container fxFlex="100">
        <textarea type="text"
                  rows="1"
                  mdTextareaAutosize
                  mdAutosizeMinRows="1"
                  mdInput
                  formControlName="text"
                  (keyup)="autoAddNewItem(i, 'recIng')">
        </textarea>
        </md-input-container>

          <md-icon (click)="onDeleteClicked(i, 'recIng')"
                   *ngIf="!isLastElement(i, 'recIng')"
                   md-list-icon>
            delete
          </md-icon>

      </div>


  </md-card>

  <md-card formArrayName="recStep" fxFlex="100" fxLayout="row" fxLayoutAlign="center" fxLayoutWrap>

    <md-card-header fxFlex="100">
      Directions
    </md-card-header>

    <div fxFlex="100"
         *ngFor="let stepCtrl of getFormArrayControls('recStep'); let i=index"
         [formGroupName]="i"
         [ngClass]="{last: isLastElement(i, 'recStep')}"
         fxLayoutAlign="center center">

      <md-icon (click)="addItemFuncFactory('recStep')()"
               *ngIf="isLastElement(i, 'recStep')"
               md-list-icon>
        add
      </md-icon>

      <md-input-container fxFlex="100">
        <textarea type="text"
                  rows="1"
                  mdTextareaAutosize
                  mdAutosizeMinRows="1"
                  mdInput
                  formControlName="text"
                  (keyup)="autoAddNewItem(i, 'recStep')">
        </textarea>
      </md-input-container>

        <md-icon (click)="onDeleteClicked(i, 'recStep')"
                 *ngIf="!isLastElement(i, 'recStep')"
                 md-list-icon>
          delete
        </md-icon>

    </div>

  </md-card>

  <button md-raised-button color="primary" fxFlex="50">
    Save Recipe
  </button>
  <button type="button"
          md-raised-button
          color="accent"
          fxFlex="50" [routerLink]="['/recipes']">
    Cancel
  </button>
</form>
