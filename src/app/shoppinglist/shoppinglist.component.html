<div class="shopping-container"
     fxFlex="100"
     fxLayoutAlign="space-around"
     fxLayoutWrap="100">

  <form [formGroup]="ingForm"
        fxFlex.lt-md="100"
        fxFlexOrder.lt-md="2"
        fxFlex.gt-sm="76.4"
        novalidate
        (ngSubmit)="updateIngredients()">

    <button md-button
            (click)="onClear()"
            type="button">
      Clear all
      <md-icon md-list-icon>clear_all</md-icon>
    </button>

    <div [@flyInOut]
         formArrayName="shoppingListItems"
         fxLayout="row"
         fxLayoutAlign="center"
         fxLayoutWrap>

      <div *ngFor="let listItemCtrl of getListItemControls(); let i = index"
                    fxFlex="100"
                    class="shopping-list-item"
                    fxLayoutAlign="center"
                    [formGroupName]="i"
                    [ngClass]="{last: isLastElement(i)}" fxLayoutAlign="center center">

        <md-checkbox (change)="updateIngredient(i)" *ngIf="!isLastElement(i)" formControlName="checked" class="shopping-icon"></md-checkbox>

        <md-icon md-list-icon
                 class="shopping-icon"
                 (click)="addListItem()"
                 *ngIf="isLastElement(i)">
          add
        </md-icon>

        <md-input-container fxFlex="100">
        <textarea type="text"
                  fxflex="100"
                  rows="1"
                  mdTextareaAutosize
                  mdAutosizeMinRows="1"
                  mdInput
                  formControlName="text"
                  (keyup)="autoAddNewItem(i)"
                  (blur)="updateIngredient(i)">
        </textarea>
        </md-input-container>

        <md-icon (click)="onDeleteClicked(i)"
                 *ngIf="!isLastElement(i)"
                 class="shopping-icon"
                 md-list-icon>
          delete
        </md-icon>
      </div>
    </div>
  </form>

  <div fxFlex.lt-md="100"
       fxFlex.gt-sm="30"
       fxFlexOrder.lt-md="1"
       *ngIf="shoppingInfo"
       class="shopping-info">
    <h2>Welcome to your shopping list!</h2>
    <p>
      Ingredients can be send here from your recipe book or you can add your own items.
      To add an item, click on the plus sign or
      just start typing.
      You can check them off as you acquire your items or you can get rid of them
      forever by clicking on the trash can item.
    </p>
    <p>
      Don't worry about losing your data - it is saved automatically on
      a remote server as soon as you navigate away.
    </p>

    <button md-raised-button
            (click)="onGotIt()"
            color="accent">
      Got it
    </button>

  </div>

</div>
