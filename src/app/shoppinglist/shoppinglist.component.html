<div fxLayoutAlign="center">
  <form [formGroup]="ingForm"
        fxFlex.lt-md="100"
        fxFlex.gt-sm="70"
        novalidate
        (ngSubmit)="updateIngredients()">

    <div formArrayName="ingredients" fxLayout="row" fxLayoutAlign="center" fxLayoutWrap>

      <md-card *ngFor="let ingredientCtrl of ingForm.get('ingredients').controls; let i = index"
               fxFlex="100"
               class="shopping-card"
               fxLayoutAlign="center"
               [formGroupName]="i"
               [ngClass]="{last: isLastElement(i)}" fxLayoutAlign="center center">

        <md-checkbox class="shopping-checkbox" *ngIf="!isLastElement(i)"></md-checkbox>


        <a (click)="addListItem()"
           class="list-button"
           *ngIf="isLastElement(i)">
          <md-icon >
            add
          </md-icon>
        </a>

        <md-input-container fxFlex>
        <textarea type="text"
                  rows="1"
                  mdTextareaAutosize
                  mdAutosizeMinRows="1"
                  mdInput
                  class="form-control"
                  formControlName="text" (keyup)="autoAddNewItem(i)"
                  (blur)="updateIngredient(i)">
        </textarea>
        </md-input-container>

        <a class="list-button">
          <div class="icon-placeholder"
               *ngIf="isLastElement(i)">
          </div>
          <md-icon (click)="onDeleteClicked(i)"
                   *ngIf="!isLastElement(i)">
            delete
          </md-icon>
        </a>

      </md-card>

    </div>
  </form>

</div>
